# 日志

日志收集

- 日志对外门面
  - 提供不同对应等级的打印方法,自定义配置config
- 日志管理器
  - 持有config配置文件，打印器容器
- 日志配置
  - 全局配置是否开启日志打印，全局默认tag，堆栈深度，格式化堆栈和线程信息，是否需要包含线程信息，JSON解析器，自定义打印器
- 日志初始化
  - 通过日志管理类初始化自定义规则和需要的打印器

日志加工

- 堆栈信息加工

  - ```
    new Throwable().getStackTrace()
    ```

  - 将堆栈信息格式化处理

  - 过滤日志包名调用栈打印

  - 过滤太深的日志打印

- 线程信息加工

  - 将当前调用栈的线程名称格式化打印出来

- 日志模型转换

  - 自定义JSON解析器或默认toString解析

- 日志序列化

日志打印

- 控制台打印
  - 通过Log.println实现控制台打印
  - 日志打印最好分段打印，每次只打印512字节，不要太多
- 视图打印
  - 通过activity获取到contentView，将浮动TextView添加到content显示。
  - 点击textview，将RecyclerView添加到contentView中显示，再次点击将RecyclerView从contentView中移除
- 文件打印
  - 初始化设置文件路径和过期时间(过期了自动清理)
  - 有打印，如未启动，就启动单任务线程池，放入死循环任务，不断读取消息(阻塞)，然后打印文件流
  - 文件打印：创建对应时间的文件，开始写入





上层接口：

HiLogFormatter 统一格式化接口

HiLogPrinter 打印器接口





