# heapify

将任意一个数组整理成堆的形状

让当前数组看成完全二叉树，从最后一个非叶子节点来计算，siftdown下沉操作。

非叶子节点索引是多少？

获取到最后一个节点，获取他父节点的索引



复杂度为什么是O(n)

推导:

最后一层多少个节点？



满二叉树：

公式：1+2+4+8+...+2^(h-1) = 1(1-2^h) / (1-2) = 2^h - 1

非叶子节点数量：2^(h-1) - 1

叶子节点数量：2^(h-1)

h是高度

所以在满二叉树的情况下，叶子节点**大约**是N/2个(N为总数)



最后一层多少个节点结论是N/2  --交换操作数--> N/2 * 0    (乘0的原因是最后一层，下面没有节点)

那么倒数第二层多少个节点：N/4 --交换操作数--> N/4 * 1   (乘1的原因是下面有1层节点)

下面有H层节点 : n / 2^(h+1)    --交换次数--> ( n / 2^(h+1) ) * h 



![image-20210517113236952](C:\Users\chenqi\AppData\Roaming\Typora\typora-user-images\image-20210517113236952.png)