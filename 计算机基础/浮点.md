# 浮点

## 定点数

小数点的位置固定不变

举例：假设我们用一个四位的定点数来表示金额，其中小数点的位置固定在最后两位，例如，12.34 可以表示为 1234。在这个例子中，小数点的位置固定在倒数第二位，因此这也是一个定点数。

## 浮点数

小数点浮动

举例：3.14125

左移，0.314125 * 10

右移，31.4125 * 10 ^ -1



## 二进制浮点数

1.0001

左移，0.10001 * 2 ^1

右移，10.001 * 2 ^ -1



浮点表示法:

N = S * 2^P

S：尾数

P：阶码

阶码和尾数都使用二进制



摆放形式

| Pf                            | 阶码位 | Sf                            | 尾数位 |
| ----------------------------- | ------ | ----------------------------- | ------ |
| 阶码符号<br />(0:正数 1:负数) | 阶码   | 尾数符号<br />(0:正数 1:负数) | 尾数   |



举例1:

-11.001B

S:尾数

数值位都放到小数点后

最左侧的1紧邻小数点

= -0.11001 * 2 ^2

尾数符号位是负数转换成1，阶码转换为二进制正数 010

=1.11001 * 2 ^ 010



| Pf                            | 阶码位 | Sf                            | 尾数位 |
| ----------------------------- | ------ | ----------------------------- | ------ |
| 阶码符号<br />(0:正数 1:负数) | 阶码   | 尾数符号<br />(0:正数 1:负数) | 尾数   |
| 0                             | 10     | 1                             | 11001  |



举例2:

浮点数0.00100011B * 2 ^ -1 规格化表示是:

=0.100011B x 2^-3

=0.100011B x 2^-11B



举例3:

十进制数-0.125的浮点数表示?

从左至右：数符1位，尾数4位，阶符1位，阶码2位，原码表示

1.转二进制

-0.125D = -0.001B

**怎么转的？**

```
将小数部分乘以 2，并记录整数部分和剩余的小数部分。
将剩余的小数部分重复上述步骤，直到小数部分为 0 或者达到所需的精度。
对于 0.125：
将 0.125 乘以 2，得到 0.25。整数部分为 0，剩余的小数部分为 0.25。
将 0.25 乘以 2，得到 0.5。整数部分为 0，剩余的小数部分为 0.5。
将 0.5 乘以 2，得到 1.0。整数部分为 1，剩余的小数部分为 0。
因为小数部分已经为 0，我们可以停止。
因此，0.125 的二进制表示为 0.001。
```

2.转浮点数

 -0.001 

=-0.1 * 2 ^ -2

= 1.1 * 2 ^110

3.按位对应规格化

数符1位，尾数4位，阶符1位，阶码2位，原码表示

尾数是4位，对于小数，尾部添0不影响大小，对于整数，左侧添0不影响大小

1 1000 1 10







## 基础知识

**科学计数法表示**

112.5(D) = 1.125 * 10 ^ 2



**整数转二进制方法：**

短除法，除二取余，倒序排列



**小数转二进制方法：**

```
将小数部分乘以 2，并记录整数部分和剩余的小数部分。
将剩余的小数部分重复上述步骤，直到小数部分为 0 或者达到所需的精度。
对于 0.125：
将 0.125 乘以 2，得到 0.25。整数部分为 0，剩余的小数部分为 0.25。
将 0.25 乘以 2，得到 0.5。整数部分为 0，剩余的小数部分为 0.5。
将 0.5 乘以 2，得到 1.0。整数部分为 1，剩余的小数部分为 0。
因为小数部分已经为 0，我们可以停止。
因此，0.125 的二进制表示为 0.001。
```



## IEEE754浮点数的表示方法

### 单精度

4字节，32位，单精度浮点数偏移量位127(1111111(B))



112.5(D)

(1)转二进制：1110000.1(B)

(2)科学计数法表示(规格化)：1.1100001 * 2^6

6是指数，也称为阶码

小数点后的1100001是尾数

| 符号位(1位,第1位) | 阶码(8位,2~9位) | 尾数(23位)                   |
| ----------------- | --------------- | ---------------------------- |
| 0                 | 10000101        | 1100 0010 0000 0000 0000 000 |

浮点数在表示阶码时，需要再阶码的基础添加偏移量，单精度浮点数偏移量位127(1111111(B))

6+127=133= 1000 0101(B)



因为整数部分这个1是固定的，它是尾数部分的隐藏位，所以省略不写，所以只用23位就可以表示24位有效位数了

112.5 = 0  10000101  1100 0010 0000 0000 0000 000



例:

0.0101(B) 

| 符号位(1位,第1位) | 阶码(8位,2~9位) | 尾数(23位)                   |
| ----------------- | --------------- | ---------------------------- |
| 0                 | 01111101        | 0100 0000 0000 0000 0000 000 |

1.01 * 2^-2

阶码:-2 + 127 = 125 = 1111101



### 双精度

8字节 64位 偏移位1023

| 符号位(1位,第1位) | 阶码(11位） | 尾数(52位) |
| ----------------- | ----------- | ---------- |
|                   |             |            |



## IEEE754 (同上，更加详细)

### 公式

(-1)^S * 1.M * 2^(E-127)

S：sign 阶符 (1位)

E：exponent 阶码 (8位)

M：mantissa 尾数 (23位)



### 例子

#### IEEE754单精度浮点数转换十进制



**0x41A4C000 转10进制**

(1) 转二进制

0 10000011 01001001100000000000000



(2)E-127

10000011 转十进制 131

131-127 = 4



(3)1.M = 1.010010011 (尾部0省略不写)

1.M * 2^4 = 10100.10011 



(4) 转十进制

10100.10011 = 20. 59375

计算方式:

整数：2^2 + 2^4 = 20

小数：2^-1 + 2^-4 + 2 -5 = 0.5 + 0.0625 + 0.03125 = 0.59375





**0x41360000 转10进制**

(1) 转二进制

0 10000010 01101100000000000000000



(2)E-127

10000010 转十进制 130

130-127 = 3



(3)1.M = 1.011011 (尾部0省略不写)

1.M * 2^3 = 1011.011



(4) 转十进制

1011.011 = 11. 375





**0 10000100 11010100 转10进制**

(1)E-127

10000100 转十进制 132

132-127 = 5



(2)1.M = 

1.M * 2^5 = 111010.1 



(3) 转十进制

111010.1  = 58.5



#### 十进制转换IEEE754单精度浮点数

**263.3**

(1)转二进制

100000111.0 1001 1001 1001 ....



(2)

sign : 0

e: 10000111

1.M * 2^8

127 + 8 = 135  转二进制->  10000111

为什么是8次方?

100000111.0100110011001....= 1.00000111 0100110011001... * 2^8



M: 00000111010011001100100



**-123.3**

(1)转二进制

1111011.0 1001 1001 1001 ....



(2)

sign : 1

e: 

1.M * 2^6

127+6 = 133 转二进制->  10000101



M：11101101001100110011001



